var myApp=angular.module("myApp",["ngRoute","myController","ngSanitize"]);myApp.config(["$routeProvider",function(a){a.when("/index",{templateUrl:"client/frontend/build/html/index.html",controller:"indexController"}).when("/up",{templateUrl:"client/frontend/build/html/up.html",controller:"upController"}).when("/:type",{templateUrl:"client/frontend/build/html/type.html",controller:"mliController"}).when("/:type/:id",{templateUrl:"client/frontend/build/html/detail.html",controller:"detailController"}).otherwise({redirectTo:"/index"})}]);var myController=angular.module("myController",[]);myController.controller("mliController",["$scope","$http","$routeParams","$location","$rootScope",function(a,b,c,d,e){e.orderProp="-time",a.type=c.type,a.count=1,a.hintMessage="显示更多新闻",void 0!==a.type&&b({method:"get",url:"client/backend/php/showList.php",params:{type:a.type,count:a.count}}).success(function(b){a.articles=b.list}).error(function(a){console.log("error messgae:"+a)}),a.getNext=function(){b({method:"get",url:"client/backend/php/showList.php",params:{type:a.type,count:a.count+1}}).success(function(b){a.articles=a.articles.concat(b.list),a.count++,b.num<10&&(a.hintMessage="没有更多新闻了")}).error(function(a){console.log("error messgae:"+a)})},a.getDetail=function(b){d.path(a.type+"/"+b.id)}}]),myController.controller("indexController",["$scope","$http",function(a,b){b({method:"get",url:"client/backend/php/showHot.php"}).success(function(b){a.hots=b.hots,a.hots.forEach(function(b,c,d){switch(a.hots[c].type){case"mli":a.hots[c].typeCn="军事新闻";break;case"edu":a.hots[c].typeCn="教育新闻";break;case"sci":a.hots[c].typeCn="科技新闻";break;case"gam":a.hots[c].typeCn="游戏新闻";break;case"ent":a.hots[c].typeCn="娱乐新闻";break;default:a.hots[c].typeCn="其他新闻"}}),a.mlis=b.mlis,a.scis=b.scis,a.edus=b.edus,a.gams=b.gams,a.ents=b.ents}).error(function(a){console.log("error messgae:"+a)}),a.getDetail=function(a){b({method:"get",url:"client/backend/php/count.php",params:{id:a.id,type:a.type}}).success(function(b){a.count++}).error(function(a){console.log("error messgae:"+a)})}}]),myController.controller("detailController",["$scope","$http","$routeParams",function(a,b,c){b({method:"get",url:"client/backend/php/getDetail.php",params:{id:c.id,type:c.type}}).success(function(b){a.news=b}).error(function(a){console.log("error messgae:"+a)})}]),$(document).ready(function(){$("#user_name").bind("blur",function(){var a=$("#user_name").val();if(a.length<6)return void $(".warn-info").first().text("* 用户名至少6位字符");$.ajax({url:"client/backend/php/checkUserName.php?user_name="+a,method:"get",success:function(a){a.num>0?$(".warn-info").first().text("* 用户名重复"):$(".warn-info").first().text("")}})}),$("#signUp input:eq(1)").bind("blur",function(){$(this).val().length<6?$(".warn-info:eq(1)").text("* 密码至少6位字符"):$(".warn-info:eq(1)").text("")}),$("#signUp input:eq(2)").bind("blur",function(){var a=$(this).val();$("#signUp input:eq(1)").val()!=a?$(".warn-info:eq(2)").text("* 密码不一致"):$(".warn-info:eq(2)").text("")}),$("#signUp input:eq(3)").bind("blur",function(){var a=$(this).val();a.match(/^\w+@\w+\.(com)$/)?$(".warn-info:eq(3)").text(""):$(".warn-info:eq(3)").text("* 不是有效邮箱")})});